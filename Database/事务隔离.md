# 事务的衡量指标
ACID（Atomicity、Consistency、Isolation、Durability，即原子性、一致性、隔离性、持久性）

* ## 原子性(Atomicity)    
原子性是指事务是一个不可分割的工作单位，事务操作要么都发生，要么都不发生。

> 就像银行转账，A有100块，B有1000块，A要转给B50块。    
这个过程应该包括两个操作：   
A： 100 - 50    
B： 1000 + 50    
这两个操作必须是一个整体。    
PS：这个事务在真实场景中需要的操作会更多。这里只操作了账户余额表，除此自外，账单表，支付通道记录表等等，可能会更多。

    
* ## 一致性(Consistency)
事务前后的完整性必须保持一致。     
一致性，这个讲的是事务是按照预期生效的，也就是你举例的那个转账的，一致性的核心一部分是靠原子性实现的，而另一部分是逻辑实现。
> 仍然是A转B50块的例子。     
转账前 A：100 B：1000     
转账后 A：50  B：1050    
前后逻辑一致，数据都是一致的。   
---  
> 一致性与原子性有什么区别呢？     
**A必须减50，B必须加50。** 这就是一致性的要求。同样的操作A-50，B+100，两个操作都成功了，原子性就符合了，但此时不符合一致性。


   
* ## 隔离性(Isolation)    
事务的隔离性是指多个回话并发访问数据库时，数据库为每个用户开启的事务，不能被其他事务的操作干扰，多个并发之间要相互隔离。

* ## 持久性(Durability)    
一个事务一旦被提交，它对数据库中数据的改变就是永久性的，接下来即使数据库发生故障也不应该有任何影响。      
>   转账前 A：100 B：1000     
转账后 A：50  B：1050   
如果在操作前（事务还没有提交）服务器宕机或者断电，那么重启数据库以后，数据状态应该为:     
A：100 B：1000   
如果在操作后（事务已经提交）服务器宕机或者断电，那么重启数据库以后，数据状态应该为:        
A：50  B：1050   

# 事务要解决的问题    
## 脏读  
指一个事务读取了另外一个事务未提交的数据。
## 幻读    
是指在一个事务内读取到了别的事务插入的数据，导致前后读取不一致。
（一般是行影响，多了一行）


# InnnoDB的事务隔离级别   
## 读未提交
一个事务还没提交时，它做的变更就能被别的事务看到。
> 并发转账
## 读提交
一个事务提交之后，它做的变更才会被其他事务看到。


## 可重复读
一个事务执行过程中看到的数据，总是跟这个事务在启动时看到的数据是一致的。当然在可重复读隔离级别下，未提交变更对其他事务也是不可见的。
## 串行化 
顾名思义是对于同一行记录，“写”会加“写锁”，“读”会加“读锁”。当出现读写锁冲突的时候，后访问的事务必须等前一个事务执行完成，才能继续执行。